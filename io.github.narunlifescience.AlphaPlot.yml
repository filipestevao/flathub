app-id: io.github.narunlifescience.AlphaPlot
runtime: org.kde.Platform
runtime-version: "5.15"
sdk: org.kde.Sdk
base: io.qt.qtdatavis3d.BaseApp
#base-version: "5.15"
command: alphaplot
rename-icon: alphaplot
rename-desktop-file: alphaplot.desktop
finish-args:
  - --share=ipc
  - --socket=fallback-x11
  - --socket=wayland
  - --device=dri
  - --filesystem=home
  - --own-name=org.kde.*
cleanup-commands:
  - /app/cleanup-BaseApp.sh
modules:
- name: gsl
  cleanup:
    - /bin
  sources:
    - type: archive
      url: https://ftpmirror.gnu.org/gnu/gsl/gsl-2.6.tar.gz
      sha256: b782339fc7a38fe17689cb39966c4d821236c28018b6593ddb6fd59ee40786a8

- shared-modules/glu/glu-9.json

- name: alphaplot
  buildsystem: qmake
  build-commands:
      - install -Dm644 ${FLATPAK_ID}.metainfo.xml /app/share/metainfo/${FLATPAK_ID}.metainfo.xml
  build-options:
    env:
      - QMAKEPATH=/app/lib
  config-opts:
    - QMAKE_INCDIR+=/app/include/QtDataVisualization
  sources:
    - type: git
      url: https://github.com/narunlifescience/AlphaPlot.git
      tag: 1.011
      commit: 1bd069e30fb2ef2833b396ef8cb710a431bd8119
    - type: patch
      path: patches/app-path.patch
    - type: patch
      path: patches/QPainterPath.patch
    - type: file
      path: io.github.narunlifescience.AlphaPlot.metainfo.xml
